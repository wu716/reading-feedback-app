# 行动项管理功能说明

## ✨ 新增功能

### 1. ✏️ 编辑行动项
用户现在可以编辑已创建的行动项，包括：
- **行动内容**：修改行动的具体描述
- **行动类型**：在"情境触发型"和"习惯养成型"之间切换
- **标签**：修改或添加标签

**使用方法**：
1. 在行动项卡片上点击"✏️ 编辑"按钮
2. 在弹出的编辑框中修改内容
3. 点击"💾 保存修改"

### 2. 🗑️ 删除行动项
用户可以删除不需要的行动项（软删除）。

**使用方法**：
1. 在行动项卡片上点击"🗑️ 删除"按钮
2. 确认删除操作
3. 行动项将被标记为已删除（不会真正从数据库删除）

### 3. 🔄 修改行动类型
AI自动判别的行动类型可以由用户手动修改：
- **从"情境触发型"改为"习惯养成型"**
- **从"习惯养成型"改为"情境触发型"**

**使用方法**：
1. 点击"✏️ 编辑"按钮
2. 在"行动类型"下拉框中选择新的类型
3. 保存修改

**注意事项**：
- 修改行动类型后，相应的时间管理功能会随之改变
- 情境型：显示"📊 设置次数和天数"
- 习惯型：显示"⏰ 设置时间"

## 📋 完整功能列表

每个行动项卡片现在包含以下按钮：

| 按钮 | 功能 | 适用类型 |
|------|------|----------|
| ⏰ 设置时间 | 设置持续时间和频率 | 习惯养成型 |
| 📊 设置次数和天数 | 设置目标次数和完成天数 | 情境触发型 |
| 📝 记录实践反馈 | 记录每次实践的结果和感受 | 全部 |
| 📋 查看记录 | 查看所有历史实践记录 | 全部 |
| ✏️ 编辑 | 编辑行动内容、类型和标签 | 全部 |
| 🗑️ 删除 | 删除行动项 | 全部 |

## 🎯 使用场景示例

### 场景1：AI判断错误
- AI将"每天深呼吸三次"判断为"情境触发型"
- 用户觉得这应该是"习惯养成型"
- **解决方法**：点击"✏️ 编辑" → 修改行动类型为"习惯养成型" → 保存

### 场景2：行动内容不够具体
- 原始行动："锻炼"
- 用户想改得更具体："每天晨跑30分钟"
- **解决方法**：点击"✏️ 编辑" → 修改行动内容 → 保存

### 场景3：不再需要某个行动
- 某个行动已经完成或不再需要
- **解决方法**：点击"🗑️ 删除" → 确认

## 🔧 技术实现

### 后端API
- `PUT /api/actions/{action_id}` - 更新行动项
- `DELETE /api/actions/{action_id}` - 删除行动项（软删除）

### 数据库字段
- `action_type` - 行动类型（trigger/habit）
- `deleted_at` - 软删除时间戳

### 前端功能
- 编辑模态框：支持修改行动内容、类型、标签
- 删除确认：防止误删除
- 实时更新：修改后立即刷新列表

